specVersion: 0.0.4
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: XID
    network: mainnet
    source:
      address: "<XID_CONTRACT_ADDRESS>"
      abi: XID
      startBlock: <START_BLOCK>
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      entities:
        - User
        - XIDToken
      abis:
        - name: XID
          file: ./abis/XID.json
      eventHandlers:
        - event: Mint(address,uint256,string)
          handler: handleMint
        - event: Burn(address,uint256,string)
          handler: handleBurn
      file: ./src/xid.ts

  - kind: ethereum/contract
    name: XIDController
    network: mainnet
    source:
      address: "<XID_CONTROLLER_CONTRACT_ADDRESS>"
      abi: XIDController
      startBlock: <START_BLOCK>
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      entities:
        - User
        - XIDToken
      abis:
        - name: XIDController
          file: ./abis/XIDController.json
      eventHandlers:
        - event: SignerChanged(address,address)
          handler: handleSignerChanged
        - event: MintFeeChanged(uint256,uint256)
          handler: handleMintFeeChanged
      file: ./src/xidController.ts
